建造者模式（`Builder Pattern`）
====================
### **意图**
> 将一个复杂的对象分解为多个简单的对象，然后一步一步构建而成。


### **动机**
 生活中这样的例子很多，如游戏中的不同角色，其性别、个性、能力、脸型、体型、服装、发型等特性都有所差异；还有汽车中的方向盘、发动机、车架、轮胎等部件也多种多样；每封电子邮件的发件人、收件人、主题、内容、附件等内容也各不相同。

以上所有这些产品都是由多个部件构成的，各个部件可以灵活选择，但其创建步骤都大同小异。这类产品的创建无法用前面介绍的工厂模式描述，只有建造者模式可以很好地描述该类产品的创建。

### **适用性**
建造者模式创建的是复杂对象，其产品的各个部分经常面临着剧烈的变化，但将它们组合在一起的算法却相对稳定，所以它通常在以下场合使用。
- 创建的对象较复杂，由多个部件构成，各部件面临着复杂的变化，但构件间的建造顺序是稳定的。
- 创建复杂对象的算法独立于该对象的组成部分以及它们的装配方式，即产品的构建过程和最终的表示是独立的。

### **结构**
<div align="center"> <img src="images/16.builder.png" width="360px"> </div><br>

### **实现**

```java
// 产品角色: 由多个部件构成
public class Product {
	private String partA;
	private String partB;
	private String partC;
	public void setPartA(String partA) {
		this.partA = partA;
	}
	public void setPartB(String partB) {
		this.partB = partB;
	}
	public void setPartC(String partC) {
		this.partC = partC;
	}
	public void show() {
		System.out.println("显示产品特性。。。");
	}
}

// 抽象建造者,包含创建产品各个子部件的抽象方法
public abstract class Builder {
	// 创建产品对象
	protected Product product = new Product();
	public abstract void buildPartA();
	public abstract void buildPartB();
	public abstract void buildPartC();
	// 返回产品对象
	public Product getResult() {
		return product;
	}
}

// 具体建造者：实现 Builder 接口，完成复杂产品的各个部件的具体创建方法。
public class ConcreteBuilder extends Builder {
	@Override
	public void buildPartA() {
		 product.setPartA("buildPartA");
	}
	@Override
	public void buildPartB() {
		product.setPartA("buildPartB");
	}
	@Override
	public void buildPartC() {
		product.setPartA("buildPartC");
	}
}

// 指挥者：调用建造者中的方法完成复杂对象的创建。
public class Director {
	private Builder builder;
	public Director(Builder builder) {
		this.builder = builder;
	}
    // 产品构建与组装的方法
	public Product buildProduct() {
		builder.buildPartA();
		builder.buildPartB();
		builder.buildPartC();
		return builder.getResult();
	}
}

public class TestClient {
	public static void main(String[] args) {
		Builder builder = new ConcreteBuilder();
		Director director = new Director(builder);
		Product product = director.buildProduct();
		product.show();
	}
}
```
### **已知应用**

java.lang.StringBuilder

### **相关模式**
建造者（Builder）模式和工厂模式的关注点不同：建造者模式注重零部件的组装过程，而工厂方法模式更注重零部件的创建过程，但两者可以结合使用。


# 参考资料
- 《`Head First` 设计模式》
- [图说设计模式](https://design-patterns.readthedocs.io/zh_CN/latest/index.html)
- [Java设计模式：23种设计模式全面解析（超级详细）](http://c.biancheng.net/design_pattern/)
